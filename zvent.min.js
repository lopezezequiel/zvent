var zvent=new function(){var t=[],e=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},n=function(t){return"function"==typeof t},r=function(t){return"string"==typeof t||t instanceof String},a=function(e,n,r){for(var a={hash:e,method:n,data:r},o=0;o<t.length;o++){var i=t[o].pattern,c=t[o].callback;if(i.test(e)){var s=[a].concat(e.match(i).slice(1));c.apply(c,s);break}}},o=function(t){var e={},n=/^[\w-]+=[^=]*(&[\w-]+=[^=]*)*/;if(n.test(t))for(var r=t.split("&"),a=0;a<r.length;a++)if(r[a]){var o=r[a].split("="),i=o[0],c=o[1];e[i]=c}return e},i=function(t){var e=t.match(/^#?([^?]*)(\?(.*))?$/);return{hash:""+e[1],queryString:""+e[3],params:o(""+e[3])}},c=function(t){for(var e={},n=0;n<t.elements.length;n++){var r=t.elements[n],a=r.value;if(r.name&&("INPUT"!=r.nodeName||"radio"!=r.type&&"checkbox"!=r.type||r.checked)){if("SELECT"==r.nodeName&&"select-multiple"==r.type){a=[];for(var o=0;o<r.options.length;o++){var i=r.options[o];i.selected&&a.push(i.value)}}e[r.name]=a}}return e},s=function(){var t=i(location.hash);a(t.hash,"GET",t.params)};window.addEventListener("hashchange",s,!1);var u=function(t){var e=t.target.getAttribute("action");if("#"==e.charAt(0)){t.preventDefault();var n=i(e),r=t.target.getAttribute("method"),o=c(t.target);a(n.hash,r,o)}};window.addEventListener("submit",u,!1);var h=function(t,e,n){if(!r(t))return void console.log("first parameter(hash) must be an String");if(!r(e))return void console.log("second parameter(method) must be an String");var o=i(t);"GET"==e.toUpperCase()&&void 0===n&&(n=o.params),a(o.hash,e,n)};this.subscribe=function(r,a){return e(r)?n(a)?void t.push({pattern:r,callback:a}):void console.log("second parameter(callback) must be a Function"):void console.log("first parameter(url) must be RegExp type")},this.trigger=h,this.POST=function(t,e){h(t,"POST",e)},this.GET=function(t,e){h(t,"GET",e)},this.PUT=function(t,e){h(t,"PUT",e)},this.PATCH=function(t,e){h(t,"PATCH",e)},this.DELETE=function(t,e){h(t,"DELETE",e)}};